# EspaÃ§o Therapy Kids

Sistema de gerenciamento de pacientes para clÃ­nicas de terapia infantil, desenvolvido como Projeto AcadÃªmico em Java (Spring Boot) no backend e React (Vite) no frontend. Permite autenticaÃ§Ã£o com atÃ© 3 tentativas e operaÃ§Ãµes CRUD completas sobre pacientes armazenados em um banco Oracle.

---

## ðŸ“‹ Funcionalidades

* **AutenticaÃ§Ã£o**: Tela de login com controle de atÃ© 3 tentativas; sessÃ£o protegida via JSESSIONID.
* **CRUD de Pacientes**:

  * **Cadastrar** novos pacientes.
  * **Listar** todos os pacientes.
  * **Pesquisar** paciente por ID.
  * **Atualizar** dados de pacientes.
  * **Remover** pacientes.
* **ProteÃ§Ã£o de Rotas**: Endpoints de paciente acessÃ­veis somente apÃ³s login bem-sucedido.
* **ComunicaÃ§Ã£o Backend-Frontend**: Proxy em Vite para evitar CORS; envio de cookies de sessÃ£o (`credentials: 'include'`).

---

## ðŸ›  Tecnologias Utilizadas

* **Backend**:

  * Java 17
  * Spring Boot 3.x
  * JDBC puro (JDBC Driver Oracle)
  * Oracle Database XE
  * Maven
* **Frontend**:

  * React 18
  * Vite
  * Formik (validaÃ§Ã£o de formulÃ¡rios)
  * styled-components (CSS-in-JS)
  * React Router (rotas SPA)
  * Fetch API com `credentials: 'include'`

---

## ðŸš€ PrÃ©-requisitos

* **Java 17** e **Maven** instalados
* **Oracle Database XE** rodando localmente (ex.: `localhost:1521/xe`)
* **Node.js** (>=16) e **npm** ou **Yarn**

---

## ðŸ”§ ConfiguraÃ§Ã£o

### Backend

1. **Clone** o repositÃ³rio e acesse a pasta do backend:

   ```bash
   git clone https://github.com/meirameirameira/EspacoTherapyKids.git
   ```
2. **Ajuste** as credenciais no arquivo `ConnectionFactory.java` (padrÃ£o: `system` / `admin`):

   ```java
   private static final String URL      = "jdbc:oracle:thin:@localhost:1521:xe";
   private static final String USER     = "system";
   private static final String PASSWORD = "admin";
   ```
3. **Compile** e **execute**:

   ```bash
   mvn clean package
   mvn spring-boot:run
   ```
4. O backend ficarÃ¡ disponÃ­vel em `http://localhost:8080`.

#### Banco de Dados & Tabela SQL

Antes de rodar o backend, certifique-se de criar a tabela de pacientes no Oracle executando o script SQL localizado em:

```
EspacoTherapyKids/EspacoTherapyKidsSQL.sql
```

Este script inclui:

```sql
-- Apaga a tabela antiga (e todo o conteÃºdo)
DROP TABLE "SYSTEM"."TB_PACIENTE" PURGE;

CREATE TABLE "SYSTEM"."TB_PACIENTE" (
  "CD_PACIENTE"    NUMBER GENERATED BY DEFAULT AS IDENTITY
                       MINVALUE 1
                       START WITH 1
                       INCREMENT BY 1
                       CACHE 20
                       NOT NULL,
  "NR_RESPONSAVEL" VARCHAR2(20 BYTE),
  "NM_RESPONSAVEL" VARCHAR2(100 BYTE),
  "NM_PACIENTE"    VARCHAR2(100 BYTE) NOT NULL,
  "PRECO_FONO"     NUMBER(10,2),
  "HORAS_FONO"     NUMBER(5,0),
  "TOTAL_FONO"     NUMBER(12,2),
  "REEMBOLSO_FONO" NUMBER(10,2),
  "NF_FONO"        NUMBER(5,0),
  "PRECO_TO"       NUMBER(10,2),
  "HORAS_TO"       NUMBER(5,0),
  "TOTAL_TO"       NUMBER(12,2),
  "REEMBOLSO_TO"   NUMBER(10,2),
  "NF_TO"          NUMBER(5,0),
  "PRECO_ABA"      NUMBER(10,2),
  "REEMBOLSO_ABA"  NUMBER(10,2),
  "NF_ABA"         NUMBER(5,0),
  CONSTRAINT PK_TB_PACIENTE PRIMARY KEY ("CD_PACIENTE")
);
```

### Frontend

1. Acesse a pasta do frontend:

   ```bash
   cd ../frontend
   ```
2. **Instale** as dependÃªncias:

   ```bash
   npm install
   # ou
   yarn
   ```
3. **Verifique** o proxy em `vite.config.js`:

   ```js
   server: {
     proxy: { '/api': 'http://localhost:8080' }
   }
   ```
4. **Inicie** o servidor de desenvolvimento:

   ```bash
   npm run dev
   # ou
   yarn dev
   ```
5. Acesse o frontend em `http://localhost:5173`.

---

## ðŸ“‚ Estrutura de Pastas

```
EspacoTherapyKids/
â”œâ”€â”€ EspacoTherapyKidsBackend/               # Projeto Spring Boot
â”‚   â”œâ”€â”€ src/main/java/
â”‚   â”‚   â””â”€â”€ org/example/
â”‚   â”‚       â”œâ”€â”€ factory/       # ConnectionFactory
â”‚   â”‚       â”œâ”€â”€ controller/    # AuthController, PacienteController
â”‚   â”‚       â”œâ”€â”€ dto/           # LoginRequest
â”‚   â”‚       â”œâ”€â”€ dao/           # PacienteDao
â”‚   â”‚       â”œâ”€â”€ model/         # Paciente
â”‚   â”‚       â”œâ”€â”€ exception/     # EntidadeNaoEncontradaException
â”‚   â”‚       â”œâ”€â”€ config/        # CorsConfig, WebConfig
â”‚   â”‚       â””â”€â”€ EspacoTherapyKidsApplication.java
â”‚   â””â”€â”€ pom.xml
â””â”€â”€ EspacoTherapyKidsFrontend/              # Projeto React + Vite
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ api/                # index.js (login, fetchPacientesâ€¦)
    â”‚   â”œâ”€â”€ components/
    â”‚   â”‚   â”œâ”€â”€ common/         # styled.js, InputField, Buttonâ€¦
    â”‚   â”‚   â””â”€â”€ patient/        # Create, List, Search, Update, Delete Patient
    â”‚   â”œâ”€â”€ App.jsx             # Rotas e lÃ³gica de login
    â”‚   â”œâ”€â”€ main.jsx            # Ponto de entrada ReactDOM
    â”‚   â””â”€â”€ vite.config.js      # Proxy / configuraÃ§Ã£o dev-server
    â””â”€â”€ package.json
```

---

## ðŸŽ¯ Uso

1. Ao abrir o front, a **tela de login** aparece primeiro. Digite as credenciais Oracle (`system` / `admin`).
2. ApÃ³s login bem-sucedido, navegue pela aplicaÃ§Ã£o:

   * **Cadastrar**: formulÃ¡rio para inserir dados de paciente.
   * **Listar**: tabela com todos os pacientes.
   * **Pesquisar**: busca por ID especÃ­fico.
   * **Atualizar**: ediÃ§Ã£o in-place dos dados.
   * **Remover**: exclusÃ£o de pacientes.
3. As operaÃ§Ãµes refletem no banco Oracle em tempo real.

---
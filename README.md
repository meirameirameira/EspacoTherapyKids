# Espaço Therapy Kids

Protótipo do sistema de gestão de pacientes do **Espaço Therapy Kids**, com backend em Java (JDBC puro) e frontend em React + Vite.

## Estrutura do Repositório

```
├─ EspacoTherapyKidsBackend/ # Código Java com JDBC puro para acesso ao banco
│  └─ src/
│     └─ main/
│         └─ java/
│             └─ org.example/
│                 ├─ EspacoTherapyKidsApplication.java # Classe que inicializa o backend
│                 ├─ factory/
│                 │  └─ ConnectionFactory.java # Classe que define URL, usuário e senha do DB
│                 └─ view/
│                    └─ PacienteView.java # Inicia o sistema no console
│
├─ EspacoTherapyKidsFrontend/ # Aplicação React + Vite
│  ├─ src/
│  ├─ package.json
│  └─ vite.config.js
│
├─ EspacoTherapyKidsSQL.sql
│
└─ README.md    
```

---

### Pré-requisitos

- Java 17+ instalado
- IDEs Intellij e VS Code
- Acesso ao banco de dados (Oracle ou outro suportado)

### Configuração de Conexão

A classe `ConnectionFactory.java` controla a conexão JDBC.  
Abra `EspacoTherapyKidsBackend/src/ConnectionFactory.java` e edite apenas:

```java
public class ConnectionFactory {
  public static Connection getConnection() throws SQLException {
    // Atualize para seu banco:
    String url      = "jdbc:oracle:thin:@//HOST:PORT/SERVICE";
    String user     = "SEU_USUARIO";
    String password = "SUA_SENHA";
    return DriverManager.getConnection(url, user, password);
  }
}
```

- **URL** em formato:
  - Oracle Service: `jdbc:oracle:thin:@//HOST:PORT/SERVICE_NAME`
  - Oracle SID:     `jdbc:oracle:thin:@HOST:PORT:SID`
  - Para MySQL:     `jdbc:mysql://HOST:3306/SEU_SCHEMA`
  - Para PostgreSQL:`jdbc:postgresql://HOST:5432/SEU_SCHEMA`
- **Usuário/Senha**: credenciais válidas no banco

### Tabela de Dados

Use este script SQL ou o arquivo .SQL para criar a tabela `tb_paciente`:

```sql
DROP TABLE "SYSTEM"."TB_PACIENTE" PURGE;

CREATE TABLE "SYSTEM"."TB_PACIENTE" (
  "CD_PACIENTE"    NUMBER GENERATED BY DEFAULT AS IDENTITY
                     MINVALUE 1
                     MAXVALUE 9999999999999999999999999999
                     INCREMENT BY 1
                     START WITH 1
                     CACHE 20
                     NOORDER
                     NOCYCLE
                     NOKEEP
                     NOSCALE
                     NOT NULL,
  "NR_RESPONSAVEL" VARCHAR2(20 BYTE),
  "NM_RESPONSAVEL" VARCHAR2(100 BYTE),
  "NM_PACIENTE"    VARCHAR2(100 BYTE) NOT NULL,
  "PRECO_FONO"     NUMBER(10,2),
  "HORAS_FONO"     NUMBER(5,0),
  "TOTAL_FONO"     NUMBER(12,2),
  "REEMBOLSO_FONO" NUMBER(10,2),
  "NF_FONO"        NUMBER(5,0),
  "PRECO_TO"       NUMBER(10,2),
  "HORAS_TO"       NUMBER(5,0),
  "TOTAL_TO"       NUMBER(12,2),
  "REEMBOLSO_TO"   NUMBER(10,2),
  "NF_TO"          NUMBER(5,0),
  "PRECO_ABA"      NUMBER(10,2),
  "REEMBOLSO_ABA"  NUMBER(10,2),
  "NF_ABA"         NUMBER(5,0),
  CONSTRAINT PK_TB_PACIENTE PRIMARY KEY ("CD_PACIENTE")
);

ALTER TABLE "SYSTEM"."TB_PACIENTE"
  MODIFY ("NR_RESPONSAVEL" VARCHAR2(20 BYTE));
```
---

## Backend (Java) - IntelliJ

#### Execução

1. Para rodar o sistema no console, rode a classe **PacienteView** localizada em: `EspacoTherapyKidsBackend/src/main/java/org.example/factory/ConnectionFactory.java`

2. Para iniciar o backend, rode a classe em java **EspacoTherapyKidsApplication**, localizada em: `EspacoTherapyKidsBackend/src/main/java/org.example/EspacoTherapyKidsApplication.java`

---

## Frontend (React + Vite) - VS Code

### Configuração

1. Ajuste a URL caso o backend rode em outro host ou porta.

#### Execução

1.No terminal rode:

```bash
npm install
npm run dev
```
2. Abra no navegador o localhost

---

## Endpoints Consumidos

- `GET    /api/pacientes`        → Lista todos
- `GET    /api/pacientes/{id}`   → Busca por ID
- `POST   /api/pacientes`        → Cria paciente
- `PUT    /api/pacientes/{id}`   → Atualiza paciente
- `DELETE /api/pacientes/{id}`   → Remove paciente

---
